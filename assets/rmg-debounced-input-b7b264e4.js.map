{"version":3,"file":"rmg-debounced-input-b7b264e4.js","sources":["../../node_modules/@chakra-ui/input/dist/chunk-GYFRIY2Z.mjs","../../src/rmg-debounced-input/rmg-debounced-input.tsx"],"sourcesContent":["// src/input.tsx\nimport { useFormControl } from \"@chakra-ui/form-control\";\nimport {\n  chakra,\n  forwardRef,\n  omitThemingProps,\n  useMultiStyleConfig\n} from \"@chakra-ui/system\";\nimport { cx } from \"@chakra-ui/shared-utils\";\nimport { jsx } from \"react/jsx-runtime\";\nvar Input = forwardRef(function Input2(props, ref) {\n  const { htmlSize, ...rest } = props;\n  const styles = useMultiStyleConfig(\"Input\", rest);\n  const ownProps = omitThemingProps(rest);\n  const input = useFormControl(ownProps);\n  const _className = cx(\"chakra-input\", props.className);\n  return /* @__PURE__ */ jsx(\n    chakra.input,\n    {\n      size: htmlSize,\n      ...input,\n      __css: styles.field,\n      ref,\n      className: _className\n    }\n  );\n});\nInput.displayName = \"Input\";\nInput.id = \"Input\";\n\nexport {\n  Input\n};\n","import React, { ChangeEvent, forwardRef, Ref, useEffect, useRef, useState } from 'react';\nimport { Input, InputProps, useMergeRefs } from '@chakra-ui/react';\n\nexport interface RmgDebouncedInputProps extends InputProps {\n    validator?: (value: string) => boolean;\n    onDebouncedChange?: (value: string) => void;\n    delay?: number;\n    optionList?: string[];\n}\n\nconst RmgDebouncedInputInner = (props: RmgDebouncedInputProps, ref: Ref<HTMLInputElement>) => {\n    const { validator, onDebouncedChange, delay, optionList, defaultValue, onChange, ...others } = props;\n\n    const inputElRef = useRef<HTMLInputElement>(null);\n    const refs = useMergeRefs(inputElRef, ref);\n\n    const datalistRef = useRef('datalist-' + new Date().valueOf());\n\n    const [isInvalid, setIsInvalid] = useState(false);\n    const timeoutRef = useRef<number>();\n\n    useEffect(() => {\n        if (inputElRef.current) {\n            inputElRef.current.value = defaultValue?.toString() || '';\n        }\n    }, [defaultValue]);\n\n    const handleChange = ({ target: { value } }: ChangeEvent<HTMLInputElement>) => {\n        window.clearTimeout(timeoutRef.current);\n\n        if (validator) {\n            setIsInvalid(!validator(value));\n        }\n\n        timeoutRef.current = window.setTimeout(() => {\n            onDebouncedChange?.(value);\n        }, delay ?? 500);\n    };\n\n    return (\n        <>\n            <Input\n                ref={refs}\n                list={datalistRef.current}\n                variant=\"flushed\"\n                size=\"sm\"\n                h={6}\n                onChange={handleChange}\n                isInvalid={isInvalid}\n                {...others}\n            />\n\n            {optionList && (\n                <datalist id={datalistRef.current}>\n                    {optionList?.map((opt, i) => (\n                        <option key={i}>{opt}</option>\n                    ))}\n                </datalist>\n            )}\n        </>\n    );\n};\n\nexport const RmgDebouncedInput = forwardRef(RmgDebouncedInputInner);\n"],"names":["Input","forwardRef","__name","props","ref","htmlSize","rest","styles","useMultiStyleConfig","ownProps","omitThemingProps","input","useFormControl","_className","cx","jsx","chakra","RmgDebouncedInputInner","validator","onDebouncedChange","delay","optionList","defaultValue","onChange","others","inputElRef","useRef","refs","useMergeRefs","datalistRef","isInvalid","setIsInvalid","useState","timeoutRef","useEffect","handleChange","value","window","_jsxs","_Fragment","_jsx","current","opt","RmgDebouncedInput"],"mappings":"6VAUA,IAAIA,EAAQC,EAAWC,EAAA,SAAgBC,EAAOC,EAAK,CACjD,KAAM,CAAE,SAAAC,EAAU,GAAGC,CAAI,EAAKH,EACxBI,EAASC,EAAoB,QAASF,CAAI,EAC1CG,EAAWC,EAAiBJ,CAAI,EAChCK,EAAQC,EAAeH,CAAQ,EAC/BI,EAAaC,EAAG,eAAgBX,EAAM,SAAS,EACrD,OAAuBY,EACrBC,EAAO,MACP,CACE,KAAMX,EACN,GAAGM,EACH,MAAOJ,EAAO,MACd,IAAAH,EACA,UAAWS,CACZ,CACL,CACA,EAhBuB,SAgBtB,EACDb,EAAM,YAAc,QACpBA,EAAM,GAAK,QClBX,MAAAiB,EAAAf,EAAA,CAAAC,EAAAC,IAAA,CACI,KAAA,CAAM,UAAAc,EAAEA,kBAAAA,EAAWC,MAAAA,EAAmBC,WAAAA,EAAOC,aAAAA,EAAYC,SAAAA,EAAcC,GAAAA,CAAaC,EAAAA,EAEpFC,EAAAC,SAAA,IAAA,EACAC,EAAAC,EAAAH,EAAArB,CAAA,EAEAyB,EAAAH,EAAAA,OAAA,YAAA,IAAA,KAAA,EAAA,QAAA,CAAA,EAEA,CAAAI,EAAAC,CAAA,EAAAC,EAAA,SAAA,EAAA,EACAC,EAAAP,EAAAA,SAEAQ,EAAAA,UAAAA,IAAAA,CACIT,EAAA,UACIA,EAAAA,QAAAA,OAAAA,GAAAA,YAAAA,EAAAA,aAAAA,GACJ,EAAA,CAAAH,CAAA,CAAA,EAGJ,MAAAa,EAAAjC,EAAA,CAAA,CAAsB,OAAA,CAAU,MAAAkC,CAAEA,CAAM,IAAA,CACpCC,OAAAA,aAAAA,EAAAA,OAAAA,EAEAnB,GACIa,EAAAA,CAAAA,EAAAA,CAAAA,CAAAA,EAGJE,EAAAA,QAAAA,OAAAA,WAAAA,IAAAA,CACId,GAAAA,MAAAA,EAAAA,EAAyB,EAAAC,GAAA,GAAA,CACd,EATnB,gBAYA,OAAAkB,EAAAC,EAAA,CACI,SAAA,CAAAC,EAAAxC,EAAA,CACU,IAAA2B,EACGA,KAAAA,EAAAA,QACac,QAAAA,UACV,KAAA,KACH,EAAA,EACF,SAAAN,EACOA,UAAAA,EACV,GAAAX,CACIA,CAAAA,EAAAA,GAAAA,EAAAA,WAAAA,CAIJ,GAAAK,EAAA,QAA0BY,SAAAA,GAAAA,YAAAA,EAAAA,IAAAA,CAAAA,EAAAA,IAAAA,EAAAA,SAAAA,CAElB,SAAAC,CAAiBA,EAAAA,CAAAA,EACpB,CAAA,CAAA,CAER,CAAA,CAGb,EAnDA,0BAqDOC,EAAA1C,EAAA,WAAAgB,CAAA"}