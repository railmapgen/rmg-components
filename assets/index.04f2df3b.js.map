{"version":3,"file":"index.04f2df3b.js","sources":["../../node_modules/@railmapgen/rmg-runtime/dist/util/util.js","../../node_modules/@railmapgen/rmg-runtime/dist/util/rmg-types.js","../../node_modules/@railmapgen/rmg-runtime/dist/service/config.js","../../node_modules/@railmapgen/rmg-runtime/dist/service/event-logger.js","../../node_modules/@railmapgen/rmg-runtime/dist/service/channel.js","../../node_modules/@railmapgen/rmg-runtime/dist/util/types.js","../../node_modules/@railmapgen/rmg-runtime/dist/service/frame.js","../../node_modules/@railmapgen/rmg-runtime/dist/util/constant.js","../../node_modules/@railmapgen/rmg-runtime/dist/service/settings.js","../../node_modules/@railmapgen/rmg-runtime/dist/service/benchmark.js","../../node_modules/@railmapgen/rmg-runtime/dist/service/storage.js","../../node_modules/@railmapgen/rmg-runtime/dist/index.js"],"sourcesContent":["export const waitFor = (ms) => {\n    return new Promise(resolve => {\n        setTimeout(resolve, ms, `Timeout after ${ms / 1000} seconds`);\n    });\n};\n","export var RmgEnv;\n(function (RmgEnv) {\n    RmgEnv[\"DEV\"] = \"DEV\";\n    RmgEnv[\"UAT\"] = \"UAT\";\n    RmgEnv[\"PRD\"] = \"PRD\";\n})(RmgEnv || (RmgEnv = {}));\nexport var RmgInstance;\n(function (RmgInstance) {\n    RmgInstance[\"GITHUB\"] = \"GitHub\";\n    RmgInstance[\"GITLAB\"] = \"GitLab\";\n    RmgInstance[\"BITBUCKET\"] = \"Bitbucket\";\n    RmgInstance[\"LOCALHOST\"] = \"localhost\";\n    RmgInstance[\"UNKNOWN\"] = \"unknown\";\n})(RmgInstance || (RmgInstance = {}));\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { waitFor } from '../util/util';\nimport { RmgEnv, RmgInstance } from '../util/rmg-types';\nlet initialised;\nlet component;\nlet version;\nlet environment;\nlet instance;\nconst _resetConfig = () => {\n    initialised = false;\n    component = 'rmg-unknown';\n    version = 'unknown';\n    environment = RmgEnv.PRD;\n    instance = RmgInstance.UNKNOWN;\n};\nconst fetchInfoJson = () => __awaiter(void 0, void 0, void 0, function* () {\n    const basePath = window.location.pathname.split('/')[1];\n    const url = basePath ? `/${basePath}/info.json` : '/info.json';\n    const res = yield fetch(url);\n    if (res.ok) {\n        const info = (yield res.json());\n        component = info.component;\n        version = info.version;\n        environment = info.environment;\n        instance = info.instance;\n    }\n    else {\n        throw new Error(`Failed to fetch config from ${url}`);\n    }\n});\nconst loadWithTimeout = () => __awaiter(void 0, void 0, void 0, function* () {\n    try {\n        console.log('[rmg-runtime] Loading config...');\n        const result = yield Promise.race([fetchInfoJson(), waitFor(10 * 1000)]);\n        if (!result) {\n            initialised = true;\n            console.log('[rmg-runtime] Config loaded!');\n        }\n        else {\n            console.error('[rmg-runtime] Failed to load config.', result);\n        }\n    }\n    catch (e) {\n        console.error('[rmg-runtime] Failed to load config.', e);\n    }\n});\nconst isInitialised = () => {\n    return initialised;\n};\nconst getComponent = () => {\n    return component;\n};\nconst getVersion = () => {\n    return version;\n};\nconst getEnvironment = () => {\n    return environment;\n};\nconst getInstance = () => {\n    return instance;\n};\n_resetConfig();\nexport default {\n    loadWithTimeout,\n    isInitialised,\n    getComponent,\n    getVersion,\n    getEnvironment,\n    getInstance,\n    _resetConfig,\n};\n","import config from './config';\nimport { RmgEnv } from '../util/rmg-types';\nwindow.dataLayer = window.dataLayer || [];\nconst installGtag = () => {\n    const script = document.createElement('script');\n    script.async = true;\n    script.src = 'https://www.googletagmanager.com/gtag/js?id=G-2HP8Y4MRRQ';\n    document.head.append(script);\n};\nfunction gtag(...args) {\n    if (config.getEnvironment() !== RmgEnv.DEV) {\n        // eslint-disable-next-line prefer-rest-params\n        return window.dataLayer.push(arguments);\n    }\n    else {\n        console.log('[rmg-runtime] Not going to send event in DEV environment', args);\n    }\n}\nconst customEvent = (type, data) => {\n    gtag('event', type, data);\n};\nconst init = () => {\n    installGtag();\n    gtag('js', new Date());\n    gtag('config', 'G-2HP8Y4MRRQ', {\n        appName: config.getComponent(),\n        version: config.getVersion(),\n        environment: config.getEnvironment(),\n        instance: config.getInstance(),\n    });\n};\nexport default { init, customEvent };\n","const RMG_RUNTIME_CHANNEL_NAME = 'rmg-runtime-channel';\nconst eventListeners = {};\nlet channel;\ntry {\n    channel = new BroadcastChannel(RMG_RUNTIME_CHANNEL_NAME);\n    channel.onmessage = ev => {\n        var _a;\n        const { event, data, frameId } = ev.data;\n        (_a = eventListeners[event]) === null || _a === void 0 ? void 0 : _a.forEach(cb => cb(data, frameId));\n    };\n}\ncatch (e) {\n    console.warn('[rmg-runtime] Failed to initiate broadcast channel. Some features may be unavailable.', e);\n}\nconst postEvent = (event, data) => {\n    var _a;\n    channel === null || channel === void 0 ? void 0 : channel.postMessage({ event, data, frameId: (_a = window.frameElement) === null || _a === void 0 ? void 0 : _a.id });\n};\nconst onMessage = (event, callback) => {\n    var _a;\n    if (!(event in eventListeners)) {\n        eventListeners[event] = [callback];\n    }\n    else {\n        (_a = eventListeners[event]) === null || _a === void 0 ? void 0 : _a.push(callback);\n    }\n};\nexport default { postEvent, onMessage };\n","export var Events;\n(function (Events) {\n    Events[\"SET_LANGUAGE\"] = \"SET_LANGUAGE\";\n    Events[\"OPEN_APP\"] = \"OPEN_APP\";\n    Events[\"UPDATE_URL\"] = \"UPDATE_URL\";\n})(Events || (Events = {}));\n","import channel from './channel';\nimport { Events } from '../util/types';\nconst isStandaloneWindow = () => {\n    return !window.frameElement;\n};\nconst injectCss = () => {\n    if (!isStandaloneWindow()) {\n        const style = document.createElement('style');\n        style.textContent = `.rmg-window__header{display: none !important;}`;\n        document.head.append(style);\n    }\n};\nconst openApp = (appId) => {\n    channel.postEvent(Events.OPEN_APP, appId);\n};\nconst updateUrl = (url) => {\n    channel.postEvent(Events.UPDATE_URL, url);\n};\nconst onAppOpen = (callback) => {\n    channel.onMessage(Events.OPEN_APP, callback);\n};\nconst onUrlUpdate = (callback) => {\n    channel.onMessage(Events.UPDATE_URL, callback);\n};\nexport default {\n    isStandaloneWindow,\n    injectCss,\n    openApp,\n    onAppOpen,\n    updateUrl,\n    onUrlUpdate,\n};\n","export const RMG_RUNTIME_LANGUAGE_KEY = 'rmg-runtime__language';\nexport const RMG_RUNTIME_ALLOW_ANALYTICS_KEY = 'rmg-runtime__allowAnalytics';\n","import channel from './channel';\nimport { Events } from '../util/types';\nimport { RMG_RUNTIME_ALLOW_ANALYTICS_KEY, RMG_RUNTIME_LANGUAGE_KEY } from '../util/constant';\nimport eventLogger from './event-logger';\nconst languages = ['en', 'zh-Hans', 'zh-Hant'];\nconst setLanguage = (value) => {\n    if (languages.includes(value)) {\n        channel.postEvent(Events.SET_LANGUAGE, value);\n        window.localStorage.setItem(RMG_RUNTIME_LANGUAGE_KEY, value);\n    }\n};\nconst getLanguage = () => {\n    const languageFromStorage = window.localStorage.getItem(RMG_RUNTIME_LANGUAGE_KEY);\n    return languageFromStorage && languages.includes(languageFromStorage) ? languageFromStorage : 'en';\n};\nconst onLanguageChange = (callback) => {\n    channel.onMessage(Events.SET_LANGUAGE, callback);\n};\nconst isAnalyticsQADone = () => {\n    return window.localStorage.getItem(RMG_RUNTIME_ALLOW_ANALYTICS_KEY) !== null;\n};\nconst isAllowAnalytics = () => {\n    // requires explicit allow\n    const isAllowAnalyticsFromStorage = window.localStorage.getItem(RMG_RUNTIME_ALLOW_ANALYTICS_KEY);\n    return isAllowAnalyticsFromStorage === 'true';\n};\nconst allowAnalytics = (flag) => {\n    const isPrevAllowed = isAllowAnalytics();\n    if (flag) {\n        if (isPrevAllowed) {\n            // do nothing\n        }\n        else {\n            window.localStorage.setItem(RMG_RUNTIME_ALLOW_ANALYTICS_KEY, flag.toString());\n            eventLogger.init();\n        }\n        return { refreshRequired: false };\n    }\n    else {\n        if (isPrevAllowed) {\n            // refresh required to opt-out GA\n            window.localStorage.setItem(RMG_RUNTIME_ALLOW_ANALYTICS_KEY, flag.toString());\n            return { refreshRequired: true };\n        }\n        else {\n            // do nothing\n            return { refreshRequired: false };\n        }\n    }\n};\nexport default { setLanguage, getLanguage, onLanguageChange, isAnalyticsQADone, isAllowAnalytics, allowAnalytics };\n","import config from './config';\nconst moduleStartTime = new Date().getTime();\nfunction getMsSinceStartUp() {\n    const component = config.getComponent();\n    const componentStartTime = window.localStorage.getItem(component + '__startTime');\n    if (componentStartTime === null) {\n        return new Date().getTime() - moduleStartTime;\n    }\n    else {\n        return new Date().getTime() - Number(componentStartTime);\n    }\n}\nexport default { getMsSinceStartUp };\n","import config from './config';\nconst clearStorageForCurrentApp = () => {\n    let prefix = config.getComponent();\n    if (prefix === 'rmg-unknown') {\n        console.log('[rmg-runtime] Unable to clear storage for unknown app');\n        return;\n    }\n    if (prefix === 'railmapgen.github.io') {\n        prefix = 'rmg-home';\n    }\n    let count = 0;\n    while (count < window.localStorage.length) {\n        const key = window.localStorage.key(count);\n        if (key === null || key === void 0 ? void 0 : key.startsWith(prefix + '__')) {\n            window.localStorage.removeItem(key);\n            console.log(`[rmg-runtime] Removed item ${key}`);\n        }\n        else {\n            count++;\n        }\n    }\n};\nexport default { clearStorageForCurrentApp };\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport config from './service/config';\nimport eventLogger from './service/event-logger';\nimport frame from './service/frame';\nimport settings from './service/settings';\nimport benchmark from './service/benchmark';\nimport storage from './service/storage';\nimport { waitFor } from './util/util';\nlet initialised = false;\nconst init = () => __awaiter(void 0, void 0, void 0, function* () {\n    yield config.loadWithTimeout();\n    if (settings.isAnalyticsQADone()) {\n        if (settings.isAllowAnalytics()) {\n            // init GA if user previously opt-in\n            console.log('[rmg-runtime] User has previously allowed GA');\n            eventLogger.init();\n        }\n    }\n    else {\n        if (frame.isStandaloneWindow() && config.getComponent() !== 'rmg-home') {\n            // init GA if QA not done but open in standalone window\n            console.warn('[rmg-runtime] App is opened in standalone window but analytics Q&A is not finished. GA will be init by default.');\n            eventLogger.init();\n        }\n    }\n    initialised = true;\n});\nconst ready = () => __awaiter(void 0, void 0, void 0, function* () {\n    let elapsedSeconds = 0;\n    while (elapsedSeconds <= 10 && !initialised) {\n        yield waitFor(1000);\n        elapsedSeconds += 1;\n    }\n});\nconst rmgRuntime = {\n    // ready\n    ready,\n    // config\n    getAppName: config.getComponent,\n    getAppVersion: config.getVersion,\n    getEnv: config.getEnvironment,\n    getInstance: config.getInstance,\n    // event\n    event: eventLogger.customEvent,\n    // frame\n    isStandaloneWindow: frame.isStandaloneWindow,\n    injectCss: frame.injectCss,\n    openApp: frame.openApp,\n    onAppOpen: frame.onAppOpen,\n    updateUrl: frame.updateUrl,\n    onUrlUpdate: frame.onUrlUpdate,\n    // settings\n    setLanguage: settings.setLanguage,\n    getLanguage: settings.getLanguage,\n    onLanguageChange: settings.onLanguageChange,\n    isAnalyticsQADone: settings.isAnalyticsQADone,\n    isAllowAnalytics: settings.isAllowAnalytics,\n    allowAnalytics: settings.allowAnalytics,\n    // storage\n    clearStorageForCurrentApp: storage.clearStorageForCurrentApp,\n    // benchmark\n    getMsSinceStartUp: benchmark.getMsSinceStartUp,\n};\ninit().then();\nwindow.rmgRuntime = rmgRuntime;\nexport * from './util/rmg-types';\nexport default rmgRuntime;\n"],"names":["waitFor","__name","ms","resolve","RmgEnv","RmgInstance","__awaiter","this","thisArg","_arguments","P","generator","adopt","value","reject","fulfilled","step","e","rejected","result","initialised","component","version","environment","instance","_resetConfig","fetchInfoJson","basePath","url","res","info","loadWithTimeout","isInitialised","getComponent","getVersion","getEnvironment","getInstance","config","installGtag","script","gtag","args","customEvent","type","data","init","eventLogger","RMG_RUNTIME_CHANNEL_NAME","eventListeners","channel","ev","_a","event","frameId","cb","postEvent","onMessage","callback","channel$1","Events","isStandaloneWindow","injectCss","style","openApp","appId","updateUrl","onAppOpen","onUrlUpdate","frame","RMG_RUNTIME_LANGUAGE_KEY","RMG_RUNTIME_ALLOW_ANALYTICS_KEY","languages","setLanguage","getLanguage","languageFromStorage","onLanguageChange","isAnalyticsQADone","isAllowAnalytics","allowAnalytics","flag","isPrevAllowed","settings","moduleStartTime","getMsSinceStartUp","componentStartTime","benchmark","clearStorageForCurrentApp","prefix","count","key","storage","ready","elapsedSeconds","rmgRuntime"],"mappings":"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"}