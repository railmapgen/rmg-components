import{_ as H}from"./emotion-use-insertion-effect-with-fallbacks.browser.esm-55b21f7f.js";import{r as l,R as nr}from"./index-76fb7be0.js";import{_ as tr}from"./inheritsLoose-c82a83d4.js";import{g as ur}from"./index-eaa72e81.js";import{j as ar}from"./jsx-runtime-ffb262ed.js";function or(e,r){if(e==null)return{};var n={},t=Object.keys(e),u,a;for(a=0;a<t.length;a++)u=t[a],!(r.indexOf(u)>=0)&&(n[u]=e[u]);return n}var j="data-focus-lock",me="data-focus-lock-disabled",ir="data-no-focus-lock",cr="data-autofocus-inside",fr="data-no-autofocus";function sr(e,r){return typeof e=="function"?e(r):e&&(e.current=r),e}function dr(e,r){var n=l.useState(function(){return{value:e,callback:r,facade:{get current(){return n.value},set current(t){var u=n.value;u!==t&&(n.value=t,n.callback(t,u))}}}})[0];return n.callback=r,n.facade}function lr(e,r){return dr(r||null,function(n){return e.forEach(function(t){return sr(t,n)})})}var U={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},q=function(){return q=Object.assign||function(r){for(var n,t=1,u=arguments.length;t<u;t++){n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])}return r},q.apply(this,arguments)};function Fn(e,r){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,t=Object.getOwnPropertySymbols(e);u<t.length;u++)r.indexOf(t[u])<0&&Object.prototype.propertyIsEnumerable.call(e,t[u])&&(n[t[u]]=e[t[u]]);return n}function On(e,r,n){if(n||arguments.length===2)for(var t=0,u=r.length,a;t<u;t++)(a||!(t in r))&&(a||(a=Array.prototype.slice.call(r,0,t)),a[t]=r[t]);return e.concat(a||Array.prototype.slice.call(r))}function be(e){return e}function he(e,r){r===void 0&&(r=be);var n=[],t=!1,u={read:function(){if(t)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(a){var o=r(a,t);return n.push(o),function(){n=n.filter(function(i){return i!==o})}},assignSyncMedium:function(a){for(t=!0;n.length;){var o=n;n=[],o.forEach(a)}n={push:function(i){return a(i)},filter:function(){return n}}},assignMedium:function(a){t=!0;var o=[];if(n.length){var i=n;n=[],i.forEach(a),o=n}var d=function(){var c=o;o=[],c.forEach(a)},s=function(){return Promise.resolve().then(d)};s(),n={push:function(c){o.push(c),s()},filter:function(c){return o=o.filter(c),n}}}};return u}function K(e,r){return r===void 0&&(r=be),he(e,r)}function vr(e){e===void 0&&(e={});var r=he(null);return r.options=q({async:!0,ssr:!1},e),r}var pe=K({},function(e){var r=e.target,n=e.currentTarget;return{target:r,currentTarget:n}}),ge=K(),mr=K(),br=vr({async:!0}),hr=[],Q=l.forwardRef(function(r,n){var t,u=l.useState(),a=u[0],o=u[1],i=l.useRef(),d=l.useRef(!1),s=l.useRef(null),c=r.children,f=r.disabled,m=r.noFocusGuards,v=r.persistentFocus,b=r.crossFrame,h=r.autoFocus;r.allowTextSelection;var g=r.group,F=r.className,T=r.whiteList,We=r.hasPositiveIndices,ne=r.shards,Be=ne===void 0?hr:ne,te=r.as,Ge=te===void 0?"div":te,ue=r.lockProps,He=ue===void 0?{}:ue,je=r.sideCar,C=r.returnFocus,qe=r.focusOptions,L=r.onActivation,D=r.onDeactivation,$e=l.useState({}),Ve=$e[0],Ke=l.useCallback(function(){s.current=s.current||document&&document.activeElement,i.current&&L&&L(i.current),d.current=!0},[L]),Qe=l.useCallback(function(){d.current=!1,D&&D(i.current)},[D]);l.useEffect(function(){f||(s.current=null)},[]);var Ye=l.useCallback(function(y){var S=s.current;if(S&&S.focus){var R=typeof C=="function"?C(S):C;if(R){var oe=typeof R=="object"?R:void 0;s.current=null,y?Promise.resolve().then(function(){return S.focus(oe)}):S.focus(oe)}}},[C]),ze=l.useCallback(function(y){d.current&&pe.useMedium(y)},[]),Je=ge.useMedium,Xe=l.useCallback(function(y){i.current!==y&&(i.current=y,o(y))},[]),Ze=H((t={},t[me]=f&&"disabled",t[j]=g,t),He),ae=m!==!0,er=ae&&m!=="tail",rr=lr([n,Xe]);return l.createElement(l.Fragment,null,ae&&[l.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:f?-1:0,style:U}),We?l.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:f?-1:1,style:U}):null],!f&&l.createElement(je,{id:Ve,sideCar:br,observed:a,disabled:f,persistentFocus:v,crossFrame:b,autoFocus:h,whiteList:T,shards:Be,onActivation:Ke,onDeactivation:Qe,returnFocus:Ye,focusOptions:qe}),l.createElement(Ge,H({ref:rr},Ze,{className:F,onBlur:Je,onFocus:ze}),c),er&&l.createElement("div",{"data-focus-guard":!0,tabIndex:f?-1:0,style:U}))});Q.propTypes={};Q.defaultProps={children:void 0,disabled:!1,returnFocus:!1,focusOptions:void 0,noFocusGuards:!1,autoFocus:!0,persistentFocus:!1,crossFrame:!0,hasPositiveIndices:void 0,allowTextSelection:void 0,group:void 0,className:void 0,whiteList:void 0,shards:void 0,as:"div",lockProps:{},onActivation:void 0,onDeactivation:void 0};const ye=Q;function A(e){"@babel/helpers - typeof";return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},A(e)}function pr(e,r){if(A(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var t=n.call(e,r||"default");if(A(t)!=="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function gr(e){var r=pr(e,"string");return A(r)==="symbol"?r:String(r)}function yr(e,r,n){return r=gr(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function Fr(e,r){function n(t){return t.displayName||t.name||"Component"}return function(u){var a=[],o;function i(){o=e(a.map(function(s){return s.props})),r(o)}var d=function(s){tr(c,s);function c(){return s.apply(this,arguments)||this}c.peek=function(){return o};var f=c.prototype;return f.componentDidMount=function(){a.push(this),i()},f.componentDidUpdate=function(){i()},f.componentWillUnmount=function(){var v=a.indexOf(this);a.splice(v,1),i()},f.render=function(){return nr.createElement(u,this.props)},c}(l.PureComponent);return yr(d,"displayName","SideEffect("+n(u)+")"),d}}var p=function(e){for(var r=Array(e.length),n=0;n<e.length;++n)r[n]=e[n];return r},_=function(e){return Array.isArray(e)?e:[e]},Fe=function(e){return Array.isArray(e)?e[0]:e},Or=function(e){if(e.nodeType!==Node.ELEMENT_NODE)return!1;var r=window.getComputedStyle(e,null);return!r||!r.getPropertyValue?!1:r.getPropertyValue("display")==="none"||r.getPropertyValue("visibility")==="hidden"},Oe=function(e){return e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?e.parentNode.host:e.parentNode},xe=function(e){return e===document||e&&e.nodeType===Node.DOCUMENT_NODE},xr=function(e,r){return!e||xe(e)||!Or(e)&&r(Oe(e))},Ee=function(e,r){var n=e.get(r);if(n!==void 0)return n;var t=xr(r,Ee.bind(void 0,e));return e.set(r,t),t},Er=function(e,r){return e&&!xe(e)?Ar(e)?r(Oe(e)):!1:!0},Ie=function(e,r){var n=e.get(r);if(n!==void 0)return n;var t=Er(r,Ie.bind(void 0,e));return e.set(r,t),t},Se=function(e){return e.dataset},Ir=function(e){return e.tagName==="BUTTON"},Ae=function(e){return e.tagName==="INPUT"},Pe=function(e){return Ae(e)&&e.type==="radio"},Sr=function(e){return!((Ae(e)||Ir(e))&&(e.type==="hidden"||e.disabled))},Ar=function(e){var r=e.getAttribute(fr);return![!0,"true",""].includes(r)},Y=function(e){var r;return!!(e&&(!((r=Se(e))===null||r===void 0)&&r.focusGuard))},N=function(e){return!Y(e)},Pr=function(e){return!!e},wr=function(e,r){var n=e.tabIndex-r.tabIndex,t=e.index-r.index;if(n){if(!e.tabIndex)return 1;if(!r.tabIndex)return-1}return n||t},we=function(e,r,n){return p(e).map(function(t,u){return{node:t,index:u,tabIndex:n&&t.tabIndex===-1?(t.dataset||{}).focusGuard?0:-1:t.tabIndex}}).filter(function(t){return!r||t.tabIndex>=0}).sort(wr)},Tr=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"],z=Tr.join(","),Cr="".concat(z,", [data-focus-guard]"),Te=function(e,r){return p((e.shadowRoot||e).children).reduce(function(n,t){return n.concat(t.matches(r?Cr:z)?[t]:[],Te(t))},[])},_r=function(e,r){var n;return e instanceof HTMLIFrameElement&&(!((n=e.contentDocument)===null||n===void 0)&&n.body)?M([e.contentDocument.body],r):[e]},M=function(e,r){return e.reduce(function(n,t){var u,a=Te(t,r),o=(u=[]).concat.apply(u,a.map(function(i){return _r(i,r)}));return n.concat(o,t.parentNode?p(t.parentNode.querySelectorAll(z)).filter(function(i){return i===t}):[])},[])},Nr=function(e){var r=e.querySelectorAll("[".concat(cr,"]"));return p(r).map(function(n){return M([n])}).reduce(function(n,t){return n.concat(t)},[])},J=function(e,r){return p(e).filter(function(n){return Ee(r,n)}).filter(function(n){return Sr(n)})},ie=function(e,r){return r===void 0&&(r=new Map),p(e).filter(function(n){return Ie(r,n)})},$=function(e,r,n){return we(J(M(e,n),r),!0,n)},ce=function(e,r){return we(J(M(e),r),!1)},kr=function(e,r){return J(Nr(e),r)},x=function(e,r){return e.shadowRoot?x(e.shadowRoot,r):Object.getPrototypeOf(e).contains!==void 0&&Object.getPrototypeOf(e).contains.call(e,r)?!0:p(e.children).some(function(n){var t;if(n instanceof HTMLIFrameElement){var u=(t=n.contentDocument)===null||t===void 0?void 0:t.body;return u?x(u,r):!1}return x(n,r)})},Mr=function(e){for(var r=new Set,n=e.length,t=0;t<n;t+=1)for(var u=t+1;u<n;u+=1){var a=e[t].compareDocumentPosition(e[u]);(a&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&r.add(u),(a&Node.DOCUMENT_POSITION_CONTAINS)>0&&r.add(t)}return e.filter(function(o,i){return!r.has(i)})},Ce=function(e){return e.parentNode?Ce(e.parentNode):e},X=function(e){var r=_(e);return r.filter(Boolean).reduce(function(n,t){var u=t.getAttribute(j);return n.push.apply(n,u?Mr(p(Ce(t).querySelectorAll("[".concat(j,'="').concat(u,'"]:not([').concat(me,'="disabled"])')))):[t]),n},[])},Lr=function(e){try{return e()}catch{return}},P=function(e){if(e===void 0&&(e=document),!(!e||!e.activeElement)){var r=e.activeElement;return r.shadowRoot?P(r.shadowRoot):r instanceof HTMLIFrameElement&&Lr(function(){return r.contentWindow.document})?P(r.contentWindow.document):r}},Dr=function(e,r){return e===r},Rr=function(e,r){return!!p(e.querySelectorAll("iframe")).some(function(n){return Dr(n,r)})},_e=function(e,r){return r===void 0&&(r=P(Fe(e).ownerDocument)),!r||r.dataset&&r.dataset.focusGuard?!1:X(e).some(function(n){return x(n,r)||Rr(n,r)})},Ur=function(e){e===void 0&&(e=document);var r=P(e);return r?p(e.querySelectorAll("[".concat(ir,"]"))).some(function(n){return x(n,r)}):!1},Wr=function(e,r){return r.filter(Pe).filter(function(n){return n.name===e.name}).filter(function(n){return n.checked})[0]||e},Z=function(e,r){return Pe(e)&&e.name?Wr(e,r):e},Br=function(e){var r=new Set;return e.forEach(function(n){return r.add(Z(n,e))}),e.filter(function(n){return r.has(n)})},fe=function(e){return e[0]&&e.length>1?Z(e[0],e):e[0]},se=function(e,r){return e.length>1?e.indexOf(Z(e[r],e)):r},Ne="NEW_FOCUS",Gr=function(e,r,n,t){var u=e.length,a=e[0],o=e[u-1],i=Y(n);if(!(n&&e.indexOf(n)>=0)){var d=n!==void 0?r.indexOf(n):-1,s=t?r.indexOf(t):d,c=t?e.indexOf(t):-1,f=d-s,m=r.indexOf(a),v=r.indexOf(o),b=Br(r),h=n!==void 0?b.indexOf(n):-1,g=h-(t?b.indexOf(t):d),F=se(e,0),T=se(e,u-1);if(d===-1||c===-1)return Ne;if(!f&&c>=0)return c;if(d<=m&&i&&Math.abs(f)>1)return T;if(d>=v&&i&&Math.abs(f)>1)return F;if(f&&Math.abs(g)>1)return c;if(d<=m)return T;if(d>v)return F;if(f)return Math.abs(f)>1?c:(u+c+f)%u}},Hr=function(e){return function(r){var n,t=(n=Se(r))===null||n===void 0?void 0:n.autofocus;return r.autofocus||t!==void 0&&t!=="false"||e.indexOf(r)>=0}},jr=function(e,r,n){var t=e.map(function(a){var o=a.node;return o}),u=ie(t.filter(Hr(n)));return u&&u.length?fe(u):fe(ie(r))},V=function(e,r){return r===void 0&&(r=[]),r.push(e),e.parentNode&&V(e.parentNode.host||e.parentNode,r),r},W=function(e,r){for(var n=V(e),t=V(r),u=0;u<n.length;u+=1){var a=n[u];if(t.indexOf(a)>=0)return a}return!1},ke=function(e,r,n){var t=_(e),u=_(r),a=t[0],o=!1;return u.filter(Boolean).forEach(function(i){o=W(o||i,i)||o,n.filter(Boolean).forEach(function(d){var s=W(a,d);s&&(!o||x(s,o)?o=s:o=W(s,o))})}),o},qr=function(e,r){return e.reduce(function(n,t){return n.concat(kr(t,r))},[])},$r=function(e,r){var n=new Map;return r.forEach(function(t){return n.set(t.node,t)}),e.map(function(t){return n.get(t)}).filter(Pr)},Vr=function(e,r){var n=P(_(e).length>0?document:Fe(e).ownerDocument),t=X(e).filter(N),u=ke(n||e,e,t),a=new Map,o=ce(t,a),i=$(t,a).filter(function(v){var b=v.node;return N(b)});if(!(!i[0]&&(i=o,!i[0]))){var d=ce([u],a).map(function(v){var b=v.node;return b}),s=$r(d,i),c=s.map(function(v){var b=v.node;return b}),f=Gr(c,d,n,r);if(f===Ne){var m=jr(o,c,qr(t,a));if(m)return{node:m};console.warn("focus-lock: cannot find any node to move focus into");return}return f===void 0?f:s[f]}},Kr=function(e){var r=X(e).filter(N),n=ke(e,e,r),t=new Map,u=$([n],t,!0),a=$(r,t).filter(function(o){var i=o.node;return N(i)}).map(function(o){var i=o.node;return i});return u.map(function(o){var i=o.node,d=o.index;return{node:i,index:d,lockItem:a.indexOf(i)>=0,guard:Y(i)}})},Qr=function(e,r){"focus"in e&&e.focus(r),"contentWindow"in e&&e.contentWindow&&e.contentWindow.focus()},B=0,G=!1,Me=function(e,r,n){n===void 0&&(n={});var t=Vr(e,r);if(!G&&t){if(B>2){console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),G=!0,setTimeout(function(){G=!1},1);return}B++,Qr(t.node,n.focusOptions),B--}};function ee(e){setTimeout(e,1)}var Yr=function(){return document&&document.activeElement===document.body},zr=function(){return Yr()||Ur()},E=null,O=null,I=null,w=!1,Jr=function(){return!0},Xr=function(r){return(E.whiteList||Jr)(r)},Zr=function(r,n){I={observerNode:r,portaledElement:n}},en=function(r){return I&&I.portaledElement===r};function de(e,r,n,t){var u=null,a=e;do{var o=t[a];if(o.guard)o.node.dataset.focusAutoGuard&&(u=o);else if(o.lockItem){if(a!==e)return;u=null}else break}while((a+=n)!==r);u&&(u.node.tabIndex=0)}var rn=function(r){return r&&"current"in r?r.current:r},nn=function(r){return r?!!w:w==="meanwhile"},tn=function e(r,n,t){return n&&(n.host===r&&(!n.activeElement||t.contains(n.activeElement))||n.parentNode&&e(r,n.parentNode,t))},un=function(r,n){return n.some(function(t){return tn(r,t,t)})},k=function(){var r=!1;if(E){var n=E,t=n.observed,u=n.persistentFocus,a=n.autoFocus,o=n.shards,i=n.crossFrame,d=n.focusOptions,s=t||I&&I.portaledElement,c=document&&document.activeElement;if(s){var f=[s].concat(o.map(rn).filter(Boolean));if((!c||Xr(c))&&(u||nn(i)||!zr()||!O&&a)&&(s&&!(_e(f)||c&&un(c,f)||en(c))&&(document&&!O&&c&&!a?(c.blur&&c.blur(),document.body.focus()):(r=Me(f,O,{focusOptions:d}),I={})),w=!1,O=document&&document.activeElement),document){var m=document&&document.activeElement,v=Kr(f),b=v.map(function(h){var g=h.node;return g}).indexOf(m);b>-1&&(v.filter(function(h){var g=h.guard,F=h.node;return g&&F.dataset.focusAutoGuard}).forEach(function(h){var g=h.node;return g.removeAttribute("tabIndex")}),de(b,v.length,1,v),de(b,-1,-1,v))}}}return r},Le=function(r){k()&&r&&(r.stopPropagation(),r.preventDefault())},re=function(){return ee(k)},an=function(r){var n=r.target,t=r.currentTarget;t.contains(n)||Zr(t,n)},on=function(){return null},De=function(){w="just",ee(function(){w="meanwhile"})},cn=function(){document.addEventListener("focusin",Le),document.addEventListener("focusout",re),window.addEventListener("blur",De)},fn=function(){document.removeEventListener("focusin",Le),document.removeEventListener("focusout",re),window.removeEventListener("blur",De)};function sn(e){return e.filter(function(r){var n=r.disabled;return!n})}function dn(e){var r=e.slice(-1)[0];r&&!E&&cn();var n=E,t=n&&r&&r.id===n.id;E=r,n&&!t&&(n.onDeactivation(),e.filter(function(u){var a=u.id;return a===n.id}).length||n.returnFocus(!r)),r?(O=null,(!t||n.observed!==r.observed)&&r.onActivation(),k(),ee(k)):(fn(),O=null)}pe.assignSyncMedium(an);ge.assignMedium(re);mr.assignMedium(function(e){return e({moveFocusInside:Me,focusInside:_e})});const ln=Fr(sn,dn)(on);var Re=l.forwardRef(function(r,n){return l.createElement(ye,H({sideCar:ln,ref:n},r))}),Ue=ye.propTypes||{};Ue.sideCar;or(Ue,["sideCar"]);Re.propTypes={};const le=Re;var ve,vn=(ve=le.default)!=null?ve:le,mn=e=>{const{initialFocusRef:r,finalFocusRef:n,contentRef:t,restoreFocus:u,children:a,isDisabled:o,autoFocus:i,persistentFocus:d,lockFocusAcrossFrames:s}=e,c=l.useCallback(()=>{r!=null&&r.current?r.current.focus():t!=null&&t.current&&ur(t.current).length===0&&requestAnimationFrame(()=>{var b;(b=t.current)==null||b.focus()})},[r,t]),f=l.useCallback(()=>{var v;(v=n==null?void 0:n.current)==null||v.focus()},[n]),m=u&&!n;return ar.jsx(vn,{crossFrame:s,persistentFocus:d,autoFocus:i,disabled:o,onActivation:c,onDeactivation:f,returnFocus:m,children:a})};mn.displayName="FocusLock";export{mn as F,Fn as _,q as a,On as b,vr as c,lr as u};
//# sourceMappingURL=chunk-UU5OHSNF-1e068ca9.js.map
