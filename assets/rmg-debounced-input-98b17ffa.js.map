{"version":3,"file":"rmg-debounced-input-98b17ffa.js","sources":["../../node_modules/@chakra-ui/input/dist/chunk-GYFRIY2Z.mjs","../../src/rmg-debounced-input/rmg-debounced-input.tsx"],"sourcesContent":["// src/input.tsx\nimport { useFormControl } from \"@chakra-ui/form-control\";\nimport {\n  chakra,\n  forwardRef,\n  omitThemingProps,\n  useMultiStyleConfig\n} from \"@chakra-ui/system\";\nimport { cx } from \"@chakra-ui/shared-utils\";\nimport { jsx } from \"react/jsx-runtime\";\nvar Input = forwardRef(function Input2(props, ref) {\n  const { htmlSize, ...rest } = props;\n  const styles = useMultiStyleConfig(\"Input\", rest);\n  const ownProps = omitThemingProps(rest);\n  const input = useFormControl(ownProps);\n  const _className = cx(\"chakra-input\", props.className);\n  return /* @__PURE__ */ jsx(\n    chakra.input,\n    {\n      size: htmlSize,\n      ...input,\n      __css: styles.field,\n      ref,\n      className: _className\n    }\n  );\n});\nInput.displayName = \"Input\";\nInput.id = \"Input\";\n\nexport {\n  Input\n};\n","import React, { ChangeEvent, FocusEventHandler, forwardRef, Ref, useEffect, useRef, useState } from 'react';\nimport { Input, InputProps, useMergeRefs } from '@chakra-ui/react';\n\nexport interface RmgDebouncedInputProps extends InputProps {\n    validator?: (value: string) => boolean;\n    onDebouncedChange?: (value: string) => void;\n    delay?: number;\n    optionList?: string[];\n}\n\nconst RmgDebouncedInputInner = (props: RmgDebouncedInputProps, ref: Ref<HTMLInputElement>) => {\n    const { validator, onDebouncedChange, delay, optionList, defaultValue, onChange, ...others } = props;\n\n    const inputElRef = useRef<HTMLInputElement>(null);\n    const refs = useMergeRefs(inputElRef, ref);\n\n    const datalistRef = useRef('datalist-' + new Date().valueOf());\n\n    const [isInvalid, setIsInvalid] = useState(false);\n    const timeoutRef = useRef<number>();\n\n    useEffect(() => {\n        if (inputElRef.current) {\n            inputElRef.current.value = defaultValue?.toString() || '';\n        }\n    }, [defaultValue]);\n\n    const handleChange = ({ target: { value } }: ChangeEvent<HTMLInputElement>) => {\n        window.clearTimeout(timeoutRef.current);\n\n        if (validator) {\n            setIsInvalid(!validator(value));\n        }\n\n        timeoutRef.current = window.setTimeout(() => {\n            onDebouncedChange?.(value);\n        }, delay ?? 500);\n    };\n\n    const handleBlur: FocusEventHandler<HTMLInputElement> = ({ target: { value } }) => {\n        window.clearTimeout(timeoutRef.current);\n        if (validator) {\n            setIsInvalid(!validator(value));\n        }\n        onDebouncedChange?.(value);\n    };\n\n    return (\n        <>\n            <Input\n                ref={refs}\n                list={datalistRef.current}\n                variant=\"flushed\"\n                size=\"sm\"\n                h={6}\n                onChange={handleChange}\n                onBlur={handleBlur}\n                isInvalid={isInvalid}\n                {...others}\n            />\n\n            {optionList && (\n                <datalist id={datalistRef.current}>\n                    {optionList?.map((opt, i) => (\n                        <option key={i}>{opt}</option>\n                    ))}\n                </datalist>\n            )}\n        </>\n    );\n};\n\nexport const RmgDebouncedInput = forwardRef(RmgDebouncedInputInner);\n"],"names":["Input","forwardRef","__name","props","ref","htmlSize","rest","styles","useMultiStyleConfig","ownProps","omitThemingProps","input","useFormControl","_className","cx","jsx","chakra","RmgDebouncedInputInner","validator","onDebouncedChange","delay","optionList","defaultValue","onChange","others","inputElRef","useRef","refs","useMergeRefs","datalistRef","isInvalid","setIsInvalid","useState","timeoutRef","useEffect","handleChange","value","handleBlur","jsxs","Fragment","opt","i","RmgDebouncedInput"],"mappings":"kWAUA,IAAIA,EAAQC,EAAWC,EAAA,SAAgBC,EAAOC,EAAK,CACjD,KAAM,CAAE,SAAAC,EAAU,GAAGC,CAAI,EAAKH,EACxBI,EAASC,EAAoB,QAASF,CAAI,EAC1CG,EAAWC,EAAiBJ,CAAI,EAChCK,EAAQC,EAAeH,CAAQ,EAC/BI,EAAaC,EAAG,eAAgBX,EAAM,SAAS,EACrD,OAAuBY,EACrBC,EAAO,MACP,CACE,KAAMX,EACN,GAAGM,EACH,MAAOJ,EAAO,MACd,IAAAH,EACA,UAAWS,CACZ,CACL,CACA,EAhBuB,SAgBtB,EACDb,EAAM,YAAc,QACpBA,EAAM,GAAK,QClBX,MAAAiB,EAAAf,EAAA,CAAAC,EAAAC,IAAA,CACI,KAAA,CAAA,UAAAc,EAAA,kBAAAC,EAAA,MAAAC,EAAA,WAAAC,EAAA,aAAAC,EAAA,SAAAC,EAAA,GAAAC,CAAA,EAAArB,EAEAsB,EAAAC,SAAA,IAAA,EACAC,EAAAC,EAAAH,EAAArB,CAAA,EAEAyB,EAAAH,EAAAA,OAAA,YAAA,IAAA,KAAA,EAAA,QAAA,CAAA,EAEA,CAAAI,EAAAC,CAAA,EAAAC,EAAA,SAAA,EAAA,EACAC,EAAAP,EAAAA,SAEAQ,EAAAA,UAAA,IAAA,CACIT,EAAA,UACIA,EAAA,QAAA,OAAAH,GAAA,YAAAA,EAAA,aAAA,GACJ,EAAA,CAAAA,CAAA,CAAA,EAGJ,MAAAa,EAAAjC,EAAA,CAAA,CAAA,OAAA,CAAA,MAAAkC,CAAA,CAAA,IAAA,CACI,OAAA,aAAAH,EAAA,OAAA,EAEAf,GACIa,EAAA,CAAAb,EAAAkB,CAAA,CAAA,EAGJH,EAAA,QAAA,OAAA,WAAA,IAAA,CACId,GAAA,MAAAA,EAAAiB,EAAyB,EAAAhB,GAAA,GAAA,CACd,EATnB,gBAYAiB,EAAAnC,EAAA,CAAA,CAAA,OAAA,CAAA,MAAAkC,CAAA,CAAA,IAAA,CACI,OAAA,aAAAH,EAAA,OAAA,EACAf,GACIa,EAAA,CAAAb,EAAAkB,CAAA,CAAA,EAEJjB,GAAA,MAAAA,EAAAiB,EAAyB,EAL7B,cAQA,OAAAE,EAAAC,EAAA,CAAA,SAAA,CAEQxB,EAAAf,EAAC,CAAA,IAAA2B,EACQ,KAAAE,EAAA,QACa,QAAA,UACV,KAAA,KACH,EAAA,EACF,SAAAM,EACO,OAAAE,EACF,UAAAP,EACR,GAAAN,CACI,CAAA,EACRH,GAAAN,EAAA,WAAA,CAAA,GAAAc,EAAA,QAAA,SAAAR,GAAA,YAAAA,EAAA,IAAA,CAAAmB,EAAAC,IAAA1B,EAAA,SAAA,CAAA,SAAAyB,CAAA,EAAAC,CAAA,GAAA,CAOI,CAAA,CAAA,CAIhB,EA5DA,0BA8DOC,EAAAzC,EAAA,WAAAgB,CAAA"}