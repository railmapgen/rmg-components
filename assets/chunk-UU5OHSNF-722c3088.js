import{_ as H}from"./emotion-use-insertion-effect-with-fallbacks.browser.esm-5b0f5dab.js";import{r as l,R as Ze}from"./index-61bf1805.js";import{d as V,c as er,u as rr,e as nr}from"./inheritsLoose-7d8f126b.js";import{g as tr}from"./index-eaa72e81.js";import{j as ur}from"./jsx-runtime-4ca860c5.js";function ar(e,r){if(e==null)return{};var n={},t=Object.keys(e),u,a;for(a=0;a<t.length;a++)u=t[a],!(r.indexOf(u)>=0)&&(n[u]=e[u]);return n}var q="data-focus-lock",ve="data-focus-lock-disabled",or="data-no-focus-lock",ir="data-autofocus-inside",cr="data-no-autofocus",R={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},me=V({},function(e){var r=e.target,n=e.currentTarget;return{target:r,currentTarget:n}}),be=V(),fr=V(),sr=er({async:!0}),dr=[],K=l.forwardRef(function(r,n){var t,u=l.useState(),a=u[0],o=u[1],i=l.useRef(),s=l.useRef(!1),d=l.useRef(null),f=r.children,c=r.disabled,m=r.noFocusGuards,v=r.persistentFocus,b=r.crossFrame,h=r.autoFocus;r.allowTextSelection;var F=r.group,y=r.className,P=r.whiteList,Me=r.hasPositiveIndices,re=r.shards,Ue=re===void 0?dr:re,ne=r.as,Re=ne===void 0?"div":ne,te=r.lockProps,We=te===void 0?{}:te,Be=r.sideCar,C=r.returnFocus,Ge=r.focusOptions,D=r.onActivation,M=r.onDeactivation,He=l.useState({}),qe=He[0],$e=l.useCallback(function(){d.current=d.current||document&&document.activeElement,i.current&&D&&D(i.current),s.current=!0},[D]),je=l.useCallback(function(){s.current=!1,M&&M(i.current)},[M]);l.useEffect(function(){c||(d.current=null)},[]);var Ve=l.useCallback(function(g){var S=d.current;if(S&&S.focus){var U=typeof C=="function"?C(S):C;if(U){var ae=typeof U=="object"?U:void 0;d.current=null,g?Promise.resolve().then(function(){return S.focus(ae)}):S.focus(ae)}}},[C]),Ke=l.useCallback(function(g){s.current&&me.useMedium(g)},[]),Ye=be.useMedium,ze=l.useCallback(function(g){i.current!==g&&(i.current=g,o(g))},[]),Je=H((t={},t[ve]=c&&"disabled",t[q]=F,t),We),ue=m!==!0,Qe=ue&&m!=="tail",Xe=rr([n,ze]);return l.createElement(l.Fragment,null,ue&&[l.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:c?-1:0,style:R}),Me?l.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:c?-1:1,style:R}):null],!c&&l.createElement(Be,{id:qe,sideCar:sr,observed:a,disabled:c,persistentFocus:v,crossFrame:b,autoFocus:h,whiteList:P,shards:Ue,onActivation:$e,onDeactivation:je,returnFocus:Ve,focusOptions:Ge}),l.createElement(Re,H({ref:Xe},Je,{className:y,onBlur:Ye,onFocus:Ke}),f),Qe&&l.createElement("div",{"data-focus-guard":!0,tabIndex:c?-1:0,style:R}))});K.propTypes={};K.defaultProps={children:void 0,disabled:!1,returnFocus:!1,focusOptions:void 0,noFocusGuards:!1,autoFocus:!0,persistentFocus:!1,crossFrame:!0,hasPositiveIndices:void 0,allowTextSelection:void 0,group:void 0,className:void 0,whiteList:void 0,shards:void 0,as:"div",lockProps:{},onActivation:void 0,onDeactivation:void 0};const he=K;function A(e){"@babel/helpers - typeof";return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},A(e)}function lr(e,r){if(A(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var t=n.call(e,r||"default");if(A(t)!=="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function vr(e){var r=lr(e,"string");return A(r)==="symbol"?r:String(r)}function mr(e,r,n){return r=vr(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function br(e,r){function n(t){return t.displayName||t.name||"Component"}return function(u){var a=[],o;function i(){o=e(a.map(function(d){return d.props})),r(o)}var s=function(d){nr(f,d);function f(){return d.apply(this,arguments)||this}f.peek=function(){return o};var c=f.prototype;return c.componentDidMount=function(){a.push(this),i()},c.componentDidUpdate=function(){i()},c.componentWillUnmount=function(){var v=a.indexOf(this);a.splice(v,1),i()},c.render=function(){return Ze.createElement(u,this.props)},f}(l.PureComponent);return mr(s,"displayName","SideEffect("+n(u)+")"),s}}var p=function(e){for(var r=Array(e.length),n=0;n<e.length;++n)r[n]=e[n];return r},N=function(e){return Array.isArray(e)?e:[e]},pe=function(e){return Array.isArray(e)?e[0]:e},hr=function(e){if(e.nodeType!==Node.ELEMENT_NODE)return!1;var r=window.getComputedStyle(e,null);return!r||!r.getPropertyValue?!1:r.getPropertyValue("display")==="none"||r.getPropertyValue("visibility")==="hidden"},Fe=function(e){return e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?e.parentNode.host:e.parentNode},ge=function(e){return e===document||e&&e.nodeType===Node.DOCUMENT_NODE},pr=function(e,r){return!e||ge(e)||!hr(e)&&r(Fe(e))},ye=function(e,r){var n=e.get(r);if(n!==void 0)return n;var t=pr(r,ye.bind(void 0,e));return e.set(r,t),t},Fr=function(e,r){return e&&!ge(e)?Or(e)?r(Fe(e)):!1:!0},Oe=function(e,r){var n=e.get(r);if(n!==void 0)return n;var t=Fr(r,Oe.bind(void 0,e));return e.set(r,t),t},xe=function(e){return e.dataset},gr=function(e){return e.tagName==="BUTTON"},Ie=function(e){return e.tagName==="INPUT"},Ee=function(e){return Ie(e)&&e.type==="radio"},yr=function(e){return!((Ie(e)||gr(e))&&(e.type==="hidden"||e.disabled))},Or=function(e){var r=e.getAttribute(cr);return![!0,"true",""].includes(r)},Y=function(e){var r;return!!(e&&(!((r=xe(e))===null||r===void 0)&&r.focusGuard))},k=function(e){return!Y(e)},xr=function(e){return!!e},Ir=function(e,r){var n=e.tabIndex-r.tabIndex,t=e.index-r.index;if(n){if(!e.tabIndex)return 1;if(!r.tabIndex)return-1}return n||t},Se=function(e,r,n){return p(e).map(function(t,u){return{node:t,index:u,tabIndex:n&&t.tabIndex===-1?(t.dataset||{}).focusGuard?0:-1:t.tabIndex}}).filter(function(t){return!r||t.tabIndex>=0}).sort(Ir)},Er=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"],z=Er.join(","),Sr="".concat(z,", [data-focus-guard]"),Ae=function(e,r){return p((e.shadowRoot||e).children).reduce(function(n,t){return n.concat(t.matches(r?Sr:z)?[t]:[],Ae(t))},[])},Ar=function(e,r){var n;return e instanceof HTMLIFrameElement&&(!((n=e.contentDocument)===null||n===void 0)&&n.body)?_([e.contentDocument.body],r):[e]},_=function(e,r){return e.reduce(function(n,t){var u,a=Ae(t,r),o=(u=[]).concat.apply(u,a.map(function(i){return Ar(i,r)}));return n.concat(o,t.parentNode?p(t.parentNode.querySelectorAll(z)).filter(function(i){return i===t}):[])},[])},Tr=function(e){var r=e.querySelectorAll("[".concat(ir,"]"));return p(r).map(function(n){return _([n])}).reduce(function(n,t){return n.concat(t)},[])},J=function(e,r){return p(e).filter(function(n){return ye(r,n)}).filter(function(n){return yr(n)})},oe=function(e,r){return r===void 0&&(r=new Map),p(e).filter(function(n){return Oe(r,n)})},$=function(e,r,n){return Se(J(_(e,n),r),!0,n)},ie=function(e,r){return Se(J(_(e),r),!1)},wr=function(e,r){return J(Tr(e),r)},x=function(e,r){return e.shadowRoot?x(e.shadowRoot,r):Object.getPrototypeOf(e).contains!==void 0&&Object.getPrototypeOf(e).contains.call(e,r)?!0:p(e.children).some(function(n){var t;if(n instanceof HTMLIFrameElement){var u=(t=n.contentDocument)===null||t===void 0?void 0:t.body;return u?x(u,r):!1}return x(n,r)})},Pr=function(e){for(var r=new Set,n=e.length,t=0;t<n;t+=1)for(var u=t+1;u<n;u+=1){var a=e[t].compareDocumentPosition(e[u]);(a&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&r.add(u),(a&Node.DOCUMENT_POSITION_CONTAINS)>0&&r.add(t)}return e.filter(function(o,i){return!r.has(i)})},Te=function(e){return e.parentNode?Te(e.parentNode):e},Q=function(e){var r=N(e);return r.filter(Boolean).reduce(function(n,t){var u=t.getAttribute(q);return n.push.apply(n,u?Pr(p(Te(t).querySelectorAll("[".concat(q,'="').concat(u,'"]:not([').concat(ve,'="disabled"])')))):[t]),n},[])},Cr=function(e){try{return e()}catch{return}},T=function(e){if(e===void 0&&(e=document),!(!e||!e.activeElement)){var r=e.activeElement;return r.shadowRoot?T(r.shadowRoot):r instanceof HTMLIFrameElement&&Cr(function(){return r.contentWindow.document})?T(r.contentWindow.document):r}},Nr=function(e,r){return e===r},kr=function(e,r){return!!p(e.querySelectorAll("iframe")).some(function(n){return Nr(n,r)})},we=function(e,r){return r===void 0&&(r=T(pe(e).ownerDocument)),!r||r.dataset&&r.dataset.focusGuard?!1:Q(e).some(function(n){return x(n,r)||kr(n,r)})},Lr=function(e){e===void 0&&(e=document);var r=T(e);return r?p(e.querySelectorAll("[".concat(or,"]"))).some(function(n){return x(n,r)}):!1},_r=function(e,r){return r.filter(Ee).filter(function(n){return n.name===e.name}).filter(function(n){return n.checked})[0]||e},X=function(e,r){return Ee(e)&&e.name?_r(e,r):e},Dr=function(e){var r=new Set;return e.forEach(function(n){return r.add(X(n,e))}),e.filter(function(n){return r.has(n)})},ce=function(e){return e[0]&&e.length>1?X(e[0],e):e[0]},fe=function(e,r){return e.length>1?e.indexOf(X(e[r],e)):r},Pe="NEW_FOCUS",Mr=function(e,r,n,t){var u=e.length,a=e[0],o=e[u-1],i=Y(n);if(!(n&&e.indexOf(n)>=0)){var s=n!==void 0?r.indexOf(n):-1,d=t?r.indexOf(t):s,f=t?e.indexOf(t):-1,c=s-d,m=r.indexOf(a),v=r.indexOf(o),b=Dr(r),h=n!==void 0?b.indexOf(n):-1,F=h-(t?b.indexOf(t):s),y=fe(e,0),P=fe(e,u-1);if(s===-1||f===-1)return Pe;if(!c&&f>=0)return f;if(s<=m&&i&&Math.abs(c)>1)return P;if(s>=v&&i&&Math.abs(c)>1)return y;if(c&&Math.abs(F)>1)return f;if(s<=m)return P;if(s>v)return y;if(c)return Math.abs(c)>1?f:(u+f+c)%u}},Ur=function(e){return function(r){var n,t=(n=xe(r))===null||n===void 0?void 0:n.autofocus;return r.autofocus||t!==void 0&&t!=="false"||e.indexOf(r)>=0}},Rr=function(e,r,n){var t=e.map(function(a){var o=a.node;return o}),u=oe(t.filter(Ur(n)));return u&&u.length?ce(u):ce(oe(r))},j=function(e,r){return r===void 0&&(r=[]),r.push(e),e.parentNode&&j(e.parentNode.host||e.parentNode,r),r},W=function(e,r){for(var n=j(e),t=j(r),u=0;u<n.length;u+=1){var a=n[u];if(t.indexOf(a)>=0)return a}return!1},Ce=function(e,r,n){var t=N(e),u=N(r),a=t[0],o=!1;return u.filter(Boolean).forEach(function(i){o=W(o||i,i)||o,n.filter(Boolean).forEach(function(s){var d=W(a,s);d&&(!o||x(d,o)?o=d:o=W(d,o))})}),o},Wr=function(e,r){return e.reduce(function(n,t){return n.concat(wr(t,r))},[])},Br=function(e,r){var n=new Map;return r.forEach(function(t){return n.set(t.node,t)}),e.map(function(t){return n.get(t)}).filter(xr)},Gr=function(e,r){var n=T(N(e).length>0?document:pe(e).ownerDocument),t=Q(e).filter(k),u=Ce(n||e,e,t),a=new Map,o=ie(t,a),i=$(t,a).filter(function(v){var b=v.node;return k(b)});if(!(!i[0]&&(i=o,!i[0]))){var s=ie([u],a).map(function(v){var b=v.node;return b}),d=Br(s,i),f=d.map(function(v){var b=v.node;return b}),c=Mr(f,s,n,r);if(c===Pe){var m=Rr(o,f,Wr(t,a));if(m)return{node:m};console.warn("focus-lock: cannot find any node to move focus into");return}return c===void 0?c:d[c]}},Hr=function(e){var r=Q(e).filter(k),n=Ce(e,e,r),t=new Map,u=$([n],t,!0),a=$(r,t).filter(function(o){var i=o.node;return k(i)}).map(function(o){var i=o.node;return i});return u.map(function(o){var i=o.node,s=o.index;return{node:i,index:s,lockItem:a.indexOf(i)>=0,guard:Y(i)}})},qr=function(e,r){"focus"in e&&e.focus(r),"contentWindow"in e&&e.contentWindow&&e.contentWindow.focus()},B=0,G=!1,Ne=function(e,r,n){n===void 0&&(n={});var t=Gr(e,r);if(!G&&t){if(B>2){console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),G=!0,setTimeout(function(){G=!1},1);return}B++,qr(t.node,n.focusOptions),B--}};function Z(e){setTimeout(e,1)}var $r=function(){return document&&document.activeElement===document.body},jr=function(){return $r()||Lr()},I=null,O=null,E=null,w=!1,Vr=function(){return!0},Kr=function(r){return(I.whiteList||Vr)(r)},Yr=function(r,n){E={observerNode:r,portaledElement:n}},zr=function(r){return E&&E.portaledElement===r};function se(e,r,n,t){var u=null,a=e;do{var o=t[a];if(o.guard)o.node.dataset.focusAutoGuard&&(u=o);else if(o.lockItem){if(a!==e)return;u=null}else break}while((a+=n)!==r);u&&(u.node.tabIndex=0)}var Jr=function(r){return r&&"current"in r?r.current:r},Qr=function(r){return r?!!w:w==="meanwhile"},Xr=function e(r,n,t){return n&&(n.host===r&&(!n.activeElement||t.contains(n.activeElement))||n.parentNode&&e(r,n.parentNode,t))},Zr=function(r,n){return n.some(function(t){return Xr(r,t,t)})},L=function(){var r=!1;if(I){var n=I,t=n.observed,u=n.persistentFocus,a=n.autoFocus,o=n.shards,i=n.crossFrame,s=n.focusOptions,d=t||E&&E.portaledElement,f=document&&document.activeElement;if(d){var c=[d].concat(o.map(Jr).filter(Boolean));if((!f||Kr(f))&&(u||Qr(i)||!jr()||!O&&a)&&(d&&!(we(c)||f&&Zr(f,c)||zr(f))&&(document&&!O&&f&&!a?(f.blur&&f.blur(),document.body.focus()):(r=Ne(c,O,{focusOptions:s}),E={})),w=!1,O=document&&document.activeElement),document){var m=document&&document.activeElement,v=Hr(c),b=v.map(function(h){var F=h.node;return F}).indexOf(m);b>-1&&(v.filter(function(h){var F=h.guard,y=h.node;return F&&y.dataset.focusAutoGuard}).forEach(function(h){var F=h.node;return F.removeAttribute("tabIndex")}),se(b,v.length,1,v),se(b,-1,-1,v))}}}return r},ke=function(r){L()&&r&&(r.stopPropagation(),r.preventDefault())},ee=function(){return Z(L)},en=function(r){var n=r.target,t=r.currentTarget;t.contains(n)||Yr(t,n)},rn=function(){return null},Le=function(){w="just",Z(function(){w="meanwhile"})},nn=function(){document.addEventListener("focusin",ke),document.addEventListener("focusout",ee),window.addEventListener("blur",Le)},tn=function(){document.removeEventListener("focusin",ke),document.removeEventListener("focusout",ee),window.removeEventListener("blur",Le)};function un(e){return e.filter(function(r){var n=r.disabled;return!n})}function an(e){var r=e.slice(-1)[0];r&&!I&&nn();var n=I,t=n&&r&&r.id===n.id;I=r,n&&!t&&(n.onDeactivation(),e.filter(function(u){var a=u.id;return a===n.id}).length||n.returnFocus(!r)),r?(O=null,(!t||n.observed!==r.observed)&&r.onActivation(),L(),Z(L)):(tn(),O=null)}me.assignSyncMedium(en);be.assignMedium(ee);fr.assignMedium(function(e){return e({moveFocusInside:Ne,focusInside:we})});const on=br(un,an)(rn);var _e=l.forwardRef(function(r,n){return l.createElement(he,H({sideCar:on,ref:n},r))}),De=he.propTypes||{};De.sideCar;ar(De,["sideCar"]);_e.propTypes={};const de=_e;var le,cn=(le=de.default)!=null?le:de,fn=e=>{const{initialFocusRef:r,finalFocusRef:n,contentRef:t,restoreFocus:u,children:a,isDisabled:o,autoFocus:i,persistentFocus:s,lockFocusAcrossFrames:d}=e,f=l.useCallback(()=>{r!=null&&r.current?r.current.focus():t!=null&&t.current&&tr(t.current).length===0&&requestAnimationFrame(()=>{var b;(b=t.current)==null||b.focus()})},[r,t]),c=l.useCallback(()=>{var v;(v=n==null?void 0:n.current)==null||v.focus()},[n]),m=u&&!n;return ur.jsx(cn,{crossFrame:d,persistentFocus:s,autoFocus:i,disabled:o,onActivation:f,onDeactivation:c,returnFocus:m,children:a})};fn.displayName="FocusLock";export{fn as F};
//# sourceMappingURL=chunk-UU5OHSNF-722c3088.js.map
