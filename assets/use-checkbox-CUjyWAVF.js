import{r as o}from"./index-YTOF1_EJ.js";import{d as ye}from"./use-form-control-DBMiy26T.js";import{o as pe}from"./use-style-config-Be-hB2Uk.js";import{u as B}from"./use-callback-ref-DWfjZ6Ol.js";import{u as I}from"./use-safe-layout-effect-CW26zb7A.js";import{u as ve}from"./use-update-effect-BBuVyHsC.js";import{d as n}from"./attr-sHTFgF0E.js";import{c as u}from"./call-all-DDzecCnU.js";import{m as _}from"./use-merge-refs-CDN4nSPx.js";var he=()=>typeof document<"u",$=!1,E=null,y=!1,R=!1,K=new Set;function x(e,l){K.forEach(a=>a(e,l))}var ke=typeof window<"u"&&window.navigator!=null?/^Mac/.test(window.navigator.platform):!1;function Ee(e){return!(e.metaKey||!ke&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function ee(e){y=!0,Ee(e)&&(E="keyboard",x("keyboard",e))}function v(e){if(E="pointer",e.type==="mousedown"||e.type==="pointerdown"){y=!0;const l=e.composedPath?e.composedPath()[0]:e.target;let a=!1;try{a=l.matches(":focus-visible")}catch{}if(a)return;x("pointer",e)}}function we(e){return e.mozInputSource===0&&e.isTrusted?!0:e.detail===0&&!e.pointerType}function ge(e){we(e)&&(y=!0,E="virtual")}function Ce(e){e.target===window||e.target===document||e.target instanceof Element&&e.target.hasAttribute("tabindex")||(!y&&!R&&(E="virtual",x("virtual",e)),y=!1,R=!1)}function Le(){y=!1,R=!0}function te(){return E!=="pointer"}function Se(){if(!he()||$)return;const{focus:e}=HTMLElement.prototype;HTMLElement.prototype.focus=function(...a){y=!0,e.apply(this,a)},document.addEventListener("keydown",ee,!0),document.addEventListener("keyup",ee,!0),document.addEventListener("click",ge,!0),window.addEventListener("focus",Ce,!0),window.addEventListener("blur",Le,!1),typeof PointerEvent<"u"?(document.addEventListener("pointerdown",v,!0),document.addEventListener("pointermove",v,!0),document.addEventListener("pointerup",v,!0)):(document.addEventListener("mousedown",v,!0),document.addEventListener("mousemove",v,!0),document.addEventListener("mouseup",v,!0)),$=!0}function Fe(e){Se(),e(te());const l=()=>e(te());return K.add(l),()=>{K.delete(l)}}const De={border:"0",clip:"rect(0, 0, 0, 0)",height:"1px",width:"1px",margin:"-1px",padding:"0",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"};function Ve(e={}){const l=ye(e),{isDisabled:a,isReadOnly:f,isRequired:F,isInvalid:s,id:A,onBlur:ne,onFocus:ae,"aria-describedby":H}=l,{defaultChecked:T,isChecked:U,isFocusable:oe,onChange:re,isIndeterminate:m,name:V,value:q,tabIndex:O=void 0,"aria-label":W,"aria-labelledby":z,"aria-invalid":D,...ie}=e,P=pe(ie,["isDisabled","isReadOnly","isRequired","isInvalid","id","onBlur","onFocus","aria-describedby"]),w=B(re),G=B(ne),N=B(ae),[g,se]=o.useState(!1),[b,C]=o.useState(!1),[h,j]=o.useState(!1),[k,p]=o.useState(!1);o.useEffect(()=>Fe(se),[]);const d=o.useRef(null),[J,ue]=o.useState(!0),[de,L]=o.useState(!!T),M=U!==void 0,r=M?U:de,Q=o.useCallback(t=>{if(f||a){t.preventDefault();return}M||L(r?t.currentTarget.checked:m?!0:t.currentTarget.checked),w==null||w(t)},[f,a,r,M,m,w]);I(()=>{d.current&&(d.current.indeterminate=!!m)},[m]),ve(()=>{a&&C(!1)},[a,C]),I(()=>{const t=d.current;if(!(t!=null&&t.form))return;const i=()=>{L(!!T)};return t.form.addEventListener("reset",i),()=>{var c;return(c=t.form)==null?void 0:c.removeEventListener("reset",i)}},[]);const X=a&&!oe,Y=o.useCallback(t=>{t.key===" "&&p(!0)},[p]),Z=o.useCallback(t=>{t.key===" "&&p(!1)},[p]);I(()=>{if(!d.current)return;d.current.checked!==r&&L(d.current.checked)},[d.current]);const ce=o.useCallback((t={},i=null)=>{const c=S=>{b&&S.preventDefault(),p(!0)};return{...t,ref:i,"data-active":n(k),"data-hover":n(h),"data-checked":n(r),"data-focus":n(b),"data-focus-visible":n(b&&g),"data-indeterminate":n(m),"data-disabled":n(a),"data-invalid":n(s),"data-readonly":n(f),"aria-hidden":!0,onMouseDown:u(t.onMouseDown,c),onMouseUp:u(t.onMouseUp,()=>p(!1)),onMouseEnter:u(t.onMouseEnter,()=>j(!0)),onMouseLeave:u(t.onMouseLeave,()=>j(!1))}},[k,r,a,b,g,h,m,s,f]),le=o.useCallback((t={},i=null)=>({...t,ref:i,"data-active":n(k),"data-hover":n(h),"data-checked":n(r),"data-focus":n(b),"data-focus-visible":n(b&&g),"data-indeterminate":n(m),"data-disabled":n(a),"data-invalid":n(s),"data-readonly":n(f)}),[k,r,a,b,g,h,m,s,f]),fe=o.useCallback((t={},i=null)=>({...P,...t,ref:_(i,c=>{c&&ue(c.tagName==="LABEL")}),onClick:u(t.onClick,()=>{var c;J||((c=d.current)==null||c.click(),requestAnimationFrame(()=>{var S;(S=d.current)==null||S.focus({preventScroll:!0})}))}),"data-disabled":n(a),"data-checked":n(r),"data-invalid":n(s)}),[P,a,r,s,J]),me=o.useCallback((t={},i=null)=>({...t,ref:_(d,i),type:"checkbox",name:V,value:q,id:A,tabIndex:O,onChange:u(t.onChange,Q),onBlur:u(t.onBlur,G,()=>C(!1)),onFocus:u(t.onFocus,N,()=>C(!0)),onKeyDown:u(t.onKeyDown,Y),onKeyUp:u(t.onKeyUp,Z),required:F,checked:r,disabled:X,readOnly:f,"aria-label":W,"aria-labelledby":z,"aria-invalid":D?!!D:s,"aria-describedby":H,"aria-disabled":a,style:De}),[V,q,A,Q,G,N,Y,Z,F,r,X,f,W,z,D,s,H,a,O]),be=o.useCallback((t={},i=null)=>({...t,ref:i,onMouseDown:u(t.onMouseDown,Pe),"data-disabled":n(a),"data-checked":n(r),"data-invalid":n(s)}),[r,a,s]);return{state:{isInvalid:s,isFocused:b,isChecked:r,isActive:k,isHovered:h,isIndeterminate:m,isDisabled:a,isReadOnly:f,isRequired:F},getRootProps:fe,getCheckboxProps:ce,getIndicatorProps:le,getInputProps:me,getLabelProps:be,htmlProps:P}}function Pe(e){e.preventDefault(),e.stopPropagation()}export{Ve as u};
